#!/usr/bin/env node
'use strict';

process.title = 'mw';

var resolve = require('resolve');
var exit = require('exit');

process.on('unhandledRejection', (reason, p) => {
  console.log('Unhandled Rejection at:', p, 'reason:', reason);
});

resolve('mw-cli', {
    basedir: process.cwd()
}, function(error, projectLocalCli) {

    var mwcli;
    if (error) {
        mwcli = require('../src/cli/index');
    } else {
        mwcli = require(projectLocalCli);
    }

    console.log('ICI');

    mwcli.cli({
        cliArgs: process.argv.slice(2),
        inputStream: process.stdin,
        outputStream: process.stdout
    }).then(function(result) {
        var exitCode = typeof result === 'object' ? result.exitCode : result;
    });
});