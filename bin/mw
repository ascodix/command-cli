#!/usr/bin/env node
'use strict';

process.title = 'mw';

var resolve = require('resolve');
var exit = require('exit');

process.on('unhandledRejection', (reason, p) => {
  console.log('Unhandled Rejection at:', p, 'reason:', reason);
});

resolve('mw-cli', {
    basedir: process.cwd()
}, function(error, projectLocalCli) {

    var mwcli;
    if (error) {
        mwcli = require('../src/cli/index');
    } else {
        mwcli = require(projectLocalCli);
    }

    mwcli.default({
        args: process.argv.slice(2),
        basedir: process.cwd(),
        stream: {
            inputStream: process.stdin,
            outputStream: process.stdout,
            errorStream: process.stderr
        }
    }).then(function(result) {
        var exitCode = typeof result === 'object' ? result.exitCode : result;
    });
});